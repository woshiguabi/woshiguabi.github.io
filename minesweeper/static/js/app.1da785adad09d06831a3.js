webpackJsonp([1,2],{36:function(t,e,n){n(44);var o=n(13)(n(84),n(40),null,null);t.exports=o.exports},38:function(t,e,n){var o=n(13)(n(85),n(42),null,null);t.exports=o.exports},39:function(t,e,n){n(45);var o=n(13)(n(86),n(41),null,null);t.exports=o.exports},40:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("game")],1)},staticRenderFns:[]}},41:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",{staticClass:"game",on:{mouseup:t.handleClick,contextmenu:function(e){e.preventDefault(),t.handleRightClick(e)}}},t._l(t.cellData,function(e,o){return n("tr",{key:o},t._l(e,function(t,e){return n("cell",{key:e,attrs:{row:t.row,col:t.col,isBomb:t.isBomb,status:t.status,isFlag:t.isFlag,bombCount:t.bombCount}})}))})),t._v(" "),t.gameOver?n("div",{staticClass:"gameover-layer"},[n("div",[t._v("Game Over")]),t._v(" "),n("div",[t._v("你美丽了！")]),t._v(" "),n("div",{staticClass:"retry"},[n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.retry(e)}}},[t._v("再试一次")])])]):t._e()])},staticRenderFns:[]}},42:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("td",[t._v(t._s(t.display))])},staticRenderFns:[]}},44:function(t,e){},45:function(t,e){},82:function(t,e,n){"use strict";e.a={bombCount:50,row:20,col:20}},83:function(t,e,n){"use strict";var o=n(81),r=n.n(o),i={};i.randomBomb=function(t,e){console.time("random");var n=Array(e).fill(!1),o=Array(t).fill(1).map(function t(){var o=~~(Math.random()*e);return n[o]?t():(n[o]=!0,o)}),i=new r.a;return o.forEach(function(t){return i.add(t)}),console.timeEnd("random"),i},e.a=i},84:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(39),r=n.n(o);e.default={name:"app",components:{game:r.a}}},85:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"cell",props:["row","col","isBomb","status","isFlag","bombCount"],computed:{display:function(){return this.isFlag?"旗":0===this.status?"":this.isBomb?"雷":this.bombCount>0?this.bombCount:"空"}}}},86:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(38),r=n.n(o),i=n(82),a=n(83);e.default={name:"game",components:{cell:r.a},data:function(){return{config:i.a,gameOver:!1,cellData:[]}},mounted:function(){this.cellData=this.initData()},methods:{initData:function(){var t=a.a.randomBomb(this.config.bombCount,this.config.col*this.config.row),e=[];return console.time("map"),e=Array(i.a.row).fill(0).map(function(e,n){return Array(i.a.col).fill(0).map(function(e,o){return{status:0,isFlag:!1,row:n,col:o,isBomb:t.has(n*i.a.row+o),bombCount:0,isTriggered:!1}})}),console.timeEnd("map"),e},fail:function(){this.gameOver=!0},retry:function(){this.gameOver=!1,this.cellData=this.initData(),this.$forceUpdate()},handleClick:function(t){var e=t.target.cellIndex,n=t.target.parentNode.rowIndex,o=this.cellData[n][e];if("TD"===t.target.nodeName&&0===o.status){var r=t.button;if(0===r){if(!o.isFlag){if(o.status=1,o.isBomb)return this.$forceUpdate(),void this.fail();var i=this.getAroundCell(n,e);if(o.bombCount=i.reduce(function(t,e){return t+(e.isBomb?1:0)},0),0===o.bombCount){var a=this.$el.querySelector("table"),s=this.$nextTick;o.isTriggered=!0,i.forEach(function(t){if(!t.isTriggered&&!t.isFlag&&1!==t.status){var e=new MouseEvent("mouseup",{button:0,bubbles:!0});s(function(){a.rows[t.row].cells[t.col].dispatchEvent(e)})}})}this.$forceUpdate()}}else 2===r&&(o.isFlag?o.isFlag=!1:o.isFlag=!0,this.$forceUpdate())}},handleRightClick:function(){},getAroundCell:function(t,e){var n=[t-1,t,t+1],o=[e-1,e,e+1],r=[],i=this;return n.forEach(function(n){o.forEach(function(o){n===t&&o===e||n<0||n>=i.config.row||o<0||o>=i.config.col||r.push(i.cellData[n][o])})}),r}}}},87:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(37),r=n(36),i=n.n(r);o.a.config.productionTip=!1,new o.a({el:"#app",render:function(t){return t(i.a)}})}},[87]);
//# sourceMappingURL=app.1da785adad09d06831a3.js.map