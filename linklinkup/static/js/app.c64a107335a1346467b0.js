webpackJsonp([1],{100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"cell",props:["isSelected","isBlank","className","lineClass","isLine"],computed:{classNames:function(){return{selected:this.isSelected,blank:this.isBlank}}}}},101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(43),r=n.n(i),a=n(94),l=n.n(a),c=n(42),s=n.n(c),o=n(46),u=n.n(o),f=n(98),h=n(95),d=n(97);t.default={name:"game",components:{cell:u.a},data:function(){return{cellData:[],currentSelect:null,config:s()(h.a)}},computed:{currentTheme:function(){var e=this;return d.a.filter(function(t){return t.name===e.config.defaultTheme})[0]}},mounted:function(){this.init()},methods:{init:function(){console.time("initData"),this.cellData=this.initData(),console.timeEnd("initData")},initData:function(){var e=this.currentTheme.classNames.map(function(e){return{isBlank:!1,className:e,lineClass:"",isLine:!1,isSelected:!1}}),t={isBlank:!0,className:"",lineClass:"",isLine:!1,isSelected:!1},n=f.a.arrayRandom(e,this.config.cellGroupCount),i=f.a.arrayFillByRandomGroup(this.config.row*this.config.col,n),r=f.a.dyadicArrayWrap(f.a.arrayToDyadic(i,this.config.col),t);return r.forEach(function(e,t){e.forEach(function(e,n){e.row=t,e.col=n})}),r},handleClick:function(e){if("TD"===e.target.nodeName){var t=e.target.cellIndex,n=e.target.parentNode.rowIndex,i=this.cellData[n][t];i.isBlank!==!0&&(this.selectCell(i),this.$forceUpdate())}},selectCell:function(e){if(!this.currentSelect)return e.isSelected=!0,void(this.currentSelect=e);if(this.currentSelect===e)return e.isSelected=!1,void(this.currentSelect=null);var t=this.currentSelect;if(t.className!==e.className)return t.isSelected=!1,e.isSelected=!0,void(this.currentSelect=e);console.time("getLine");var n=this.getLine(t,e);console.timeEnd("getLine"),0===n.length?(t.isSelected=!1,e.isSelected=!0,this.currentSelect=e):(t.isBlank=!0,e.isBlank=!0,t.className="",e.className="",t.isSelected=!1,e.isSelected=!1,this.currentSelect=null,this.drawLine(n))},drawLine:function(e){var t=this;e.forEach(function(n,i){n.isLine=!0,n.lineClass=t.addLineClass(e[i-1],n,e[i+1])}),setTimeout(function(){t.hideLine(e)},this.config.lineDelay)},hideLine:function(e){e.forEach(function(e,t){e.isLine=!1,e.lineClass=""})},addLineClass:function(e,t,n){return"line "+(e?n?"line-"+this.getDirection(t,e)+" line-"+this.getDirection(t,n):"line-end line-"+this.getDirection(t,e):"line-start line-"+this.getDirection(t,n))},getDirection:function(e,t){return e.row===t.row?e.col>t.col?"l":"r":e.row>t.row?"t":"b"},getLine:function(e,t){var n=[],i=this.getHorizontalLine(e);if(i.has(t))return this.getBeeline(e,t);var r=this.getVerticalLine(e);if(r.has(t))return this.getBeeline(e,t);var a=this.getHorizontalLine(t),l=this.getVerticalLine(t);if(!i.size&&!r.size||!a.size&&!l.size)return n;var c=this.getIntersection(i,l)||this.getIntersection(r,a);if(c)return this.getBeeline(e,c).concat(this.getBeeline(c,t).slice(1));var s=this.getIntersectionArr(i,a,e.row,t.row,!0);return 0===s.length&&(s=this.getIntersectionArr(r,l,e.col,t.col,!1)),s.length>0&&(n=this.getBeeline(e,s[0]).concat(this.getBeeline(s[0],s[1]).slice(1)).concat(this.getBeeline(s[1],t).slice(1))),n},getIntersection:function(e,t){var n=null,i=!0,r=!1,a=void 0;try{for(var c,s=l()(e);!(i=(c=s.next()).done);i=!0){var o=c.value;if(t.has(o)&&o.isBlank){n=o;break}}}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n},getIntersectionArr:function(e,t,n,i,r){var a=[];if(!e.size||!t.size)return a;var c=r?"col":"row",s=r?this.cellData[n]:this.cellData.map(function(e){return e[n]}),o=r?this.cellData[i]:this.cellData.map(function(e){return e[i]}),u=!0,f=!1,h=void 0;try{for(var d,v=l()(e);!(u=(d=v.next()).done);u=!0){var m=d.value;if(m.isBlank){var g=o[m[c]];if(t.has(g)){var p=g[c];if(this.checkBeeline(s[p],o[p])){a=[s[p],o[p]];break}}}}}catch(e){f=!0,h=e}finally{try{!u&&v.return&&v.return()}finally{if(f)throw h}}return a},checkBeeline:function(e,t){var n=!0,i=this.getBeeline(e,t),r=!0,a=!1,c=void 0;try{for(var s,o=l()(i);!(r=(s=o.next()).done);r=!0){if(!s.value.isBlank){n=!1;break}}}catch(e){a=!0,c=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw c}}return n},getBeeline:function(e,t){var n=void 0,i=void 0,r=void 0;return e.row===t.row?(n=e.col,i=t.col,r=this.cellData[e.row]):(n=e.row,i=t.row,r=this.cellData.map(function(t){return t[e.col]})),n<i?r.slice(n,i+1):r.slice(i,n+1).reverse()},getHorizontalLine:function(e){return this.checkCell(this.cellData[e.row],e.col)},getVerticalLine:function(e){return this.checkCell(this.cellData.map(function(t){return t[e.col]}),e.row)},checkCell:function(e,t){for(var n=new r.a,i=t-1;i>=0;i--){var a=e[i];if((a.className===e[t].className||a.isBlank)&&n.add(a),!a.isBlank)break}for(var l=t+1,c=e.length;l<c;l++){var s=e[l];if((s.className===e[t].className||s.isBlank)&&n.add(s),!s.isBlank)break}return n}}}},44:function(e,t,n){var i=n(16)(n(99),n(48),null,null);e.exports=i.exports},46:function(e,t,n){var i=n(16)(n(100),n(50),null,null);e.exports=i.exports},47:function(e,t,n){n(52);var i=n(16)(n(101),n(49),null,null);e.exports=i.exports},48:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("game")],1)},staticRenderFns:[]}},49:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.currentTheme.name},[n("div",{staticClass:"game-config"},[n("button",{attrs:{type:"button"},on:{click:e.init}},[e._v("重新开始")])]),e._v(" "),n("table",{staticClass:"game",on:{click:e.handleClick}},e._l(e.cellData,function(t,i){return n("tr",{key:i},e._l(t,function(e,t){return n("cell",{key:t,attrs:{isSelected:e.isSelected,isLine:e.isLine,lineClass:e.lineClass,isBlank:e.isBlank,className:e.className}})}))}))])},staticRenderFns:[]}},50:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",{class:e.classNames},[e.isLine?n("div",{class:e.lineClass}):e._e(),e._v("\n  "+e._s(e.className)+"\n")])},staticRenderFns:[]}},52:function(e,t){},95:function(e,t,n){"use strict";t.a={defaultTheme:"test",cellGroupCount:9,col:10,row:10,lineDelay:500}},96:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),r=n(44),a=n.n(r);i.a.config.productionTip=!1,new i.a({el:"#app",render:function(e){return e(a.a)}})},97:function(e,t,n){"use strict";var i=n(93),r=n.n(i),a=[{name:"test",classNames:r()("123456789")}];t.a=a},98:function(e,t,n){"use strict";var i=n(43),r=n.n(i),a=n(42),l=n.n(a),c={};Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),n=t.length>>>0,i=arguments[1],r=i>>0,a=r<0?Math.max(n+r,0):Math.min(r,n),l=arguments[2],c=void 0===l?n:l>>0,s=c<0?Math.max(n+c,0):Math.min(c,n);a<s;)t[a]=e,a++;return t}}),c.dyadicArrayWrap=function(e,t){var n=0,i=0;return e.forEach(function(r,a){0===a?n=r.length+2:a===e.length-1&&(i=r.length+2),r.splice(0,0,l()({},t).valueOf()),r.splice(r.length,0,l()({},t).valueOf())}),e.splice(0,0,Array(n).fill(0).map(function(e){return l()({},t).valueOf()})),e.splice(e.length,0,Array(i).fill(0).map(function(e){return l()({},t).valueOf()})),e};var s=function e(t,n){var i=t.length,r=~~(Math.random()*i);return n.has(r)?e(t,n):(n.add(r),t[r])};c.arrayRandom=function(e,t){if(e.length<=t)return c.arrayShuffle(e),e;var n=new r.a;return Array(t).fill(0).map(function(t){return s(e,n)})},c.arrayShuffle=function(e){for(var t,n,i=e.length;i;t=~~(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);return e},c.arrayFillByRandomGroup=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=t.length,r=~~(~~(e/i)/n)*n,a=e-r*i,s=t.map(function(e,t){return a/n>t?r+n:r}),o=s.reduce(function(e,n,i){return e.concat(Array(n).fill(0).map(function(e){return l()({},t[i]).valueOf()}))},[]);return c.arrayShuffle(o),o},c.arrayToDyadic=function(e,t){var n=[];return e.forEach(function(e,i){var r=~~(i/t),a=i%t;n[r]||(n[r]=[]),n[r][a]=e}),n},t.a=c},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),r=n.n(i);t.default={name:"app",components:{game:r.a}}}},[96]);
//# sourceMappingURL=app.c64a107335a1346467b0.js.map