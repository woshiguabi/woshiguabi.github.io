webpackJsonp([1],{100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"cell",props:["isSelected","isBlank","className","lineClass","isLine"],computed:{classNames:function(){return{selected:this.isSelected,blank:this.isBlank}}}}},101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(43),i=n.n(r),a=n(94),l=n.n(a),c=n(42),s=n.n(c),o=n(46),u=n.n(o),f=n(98),h=n(95),d=n(97);t.default={name:"game",components:{cell:u.a},data:function(){return{cellData:[],currentSelect:null,config:s()(h.a)}},computed:{currentTheme:function(){var e=this;return d.a.filter(function(t){return t.name===e.config.defaultTheme})[0]}},mounted:function(){this.init()},methods:{init:function(){console.time("initData"),this.cellData=this.initData(),console.timeEnd("initData")},initData:function(){var e=this.currentTheme.classNames.map(function(e){return{isBlank:!1,className:e,lineClass:"",isLine:!1,isSelected:!1}}),t={isBlank:!0,className:"",lineClass:"",isLine:!1,isSelected:!1},n=f.a.arrayRandom(e,this.config.cellGroupCount),r=f.a.arrayFillByRandomGroup(this.config.row*this.config.col,n),i=f.a.dyadicArrayWrap(f.a.arrayToDyadic(r,this.config.col),t);return i.forEach(function(e,t){e.forEach(function(e,n){e.row=t,e.col=n})}),i},handleClick:function(e){if("TD"===e.target.nodeName){var t=e.target.cellIndex,n=e.target.parentNode.rowIndex,r=this.cellData[n][t];r.isBlank!==!0&&this.selectCell(r)}},selectCell:function(e){if(this.currentSelect)if(this.currentSelect===e)e.isSelected=!1,this.currentSelect=null;else{var t=this.currentSelect;if(t.className===e.className){console.time("getLine");var n=this.getLine(t,e);console.timeEnd("getLine"),0===n.length?(e.isSelected=!0,this.currentSelect=e):(t.isBlank=!0,e.isBlank=!0,t.className="",e.className="",e.isSelected=!1,this.currentSelect=null,this.drawLine(n)),t.isSelected=!1}else t.isSelected=!1,e.isSelected=!0,this.currentSelect=e}else e.isSelected=!0,this.currentSelect=e;this.$forceUpdate()},drawLine:function(e){var t=this,n=this;e.forEach(function(n,r){n.isLine=!0,n.lineClass=t.addLineClass(e[r-1],n,e[r+1])}),setTimeout(function(){n.hideLine(e)},n.config.lineDelay)},hideLine:function(e){e.forEach(function(e,t){e.isLine=!1,e.lineClass=""})},addLineClass:function(e,t,n){return"line "+(e?n?"line-"+this.getDirectionReverse(e,t)+" line-"+this.getDirection(t,n):"line-end line-"+this.getDirectionReverse(e,t):"line-start line-"+this.getDirection(t,n))},getDirection:function(e,t){return e.row===t.row?e.col>t.col?"l":"r":e.row>t.row?"t":"b"},getDirectionReverse:function(e,t){return e.row===t.row?e.col>t.col?"r":"l":e.row>t.row?"b":"t"},getLine:function(e,t){var n=[],r=this.getHorizontalLine(e);if(r.has(t))return this.getBeeline(e,t);var i=this.getVerticalLine(e);if(i.has(t))return this.getBeeline(e,t);var a=this.getHorizontalLine(t),l=this.getVerticalLine(t);if(!r.size&&!i.size||!a.size&&!l.size)return n;var c=this.getIntersection(r,l)||this.getIntersection(i,a);if(c)return this.getBeeline(e,c).concat(this.getBeeline(c,t).slice(1));var s=this.getIntersectionArr(r,a,e.row,t.row,!0);return 0===s.length&&(s=this.getIntersectionArr(i,l,e.col,t.col,!1)),s.length>0&&(n=this.getBeeline(e,s[0]).concat(this.getBeeline(s[0],s[1]).slice(1)).concat(this.getBeeline(s[1],t).slice(1))),n},getIntersection:function(e,t){var n=null,r=!0,i=!1,a=void 0;try{for(var c,s=l()(e);!(r=(c=s.next()).done);r=!0){var o=c.value;if(t.has(o)&&o.isBlank){n=o;break}}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n},getIntersectionArr:function(e,t,n,r,i){var a=[];if(!e.size||!t.size)return a;var c=i?"col":"row",s=i?this.cellData[n]:this.cellData.map(function(e){return e[n]}),o=i?this.cellData[r]:this.cellData.map(function(e){return e[r]}),u=!0,f=!1,h=void 0;try{for(var d,v=l()(e);!(u=(d=v.next()).done);u=!0){var m=d.value,g=o[m[c]];if(t.has(g)){var p=g[c];if(this.checkBeeline(s[p],o[p])){a=[s[p],o[p]];break}}}}catch(e){f=!0,h=e}finally{try{!u&&v.return&&v.return()}finally{if(f)throw h}}return a},getHorizontalIntersectionArr:function(e,t,n,r){var i=this.cellData.map(function(e){return e[n]}),a=this.cellData.map(function(e){return e[r]}),c=[],s=!0,o=!1,u=void 0;try{for(var f,h=l()(e);!(s=(f=h.next()).done);s=!0){var d=f.value,v=a[d.row];if(t.has(v)){var m=v.row;if(this.checkBeeline(i[m],a[m])){c=[i[m],a[m]];break}}}}catch(e){o=!0,u=e}finally{try{!s&&h.return&&h.return()}finally{if(o)throw u}}return c},checkBeeline:function(e,t){var n=!0,r=this.getBeeline(e,t),i=!0,a=!1,c=void 0;try{for(var s,o=l()(r);!(i=(s=o.next()).done);i=!0){if(!s.value.isBlank){n=!1;break}}}catch(e){a=!0,c=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw c}}return n},getBeeline:function(e,t){var n=void 0,r=void 0,i=void 0;return e.row===t.row?(n=e.col,r=t.col,i=this.cellData[e.row]):(n=e.row,r=t.row,i=this.cellData.map(function(t){return t[e.col]})),n<r?i.slice(n,r+1):i.slice(r,n+1).reverse()},getHorizontalLine:function(e){return this.checkCell(this.cellData[e.row],e.col)},getVerticalLine:function(e){return this.checkCell(this.cellData.map(function(t){return t[e.col]}),e.row)},checkCell:function(e,t){for(var n=new i.a,r=t-1;r>=0;r--){var a=e[r];if((a.className===e[t].className||a.isBlank)&&n.add(a),!a.isBlank)break}for(var l=t+1,c=e.length;l<c;l++){var s=e[l];if((s.className===e[t].className||s.isBlank)&&n.add(s),!s.isBlank)break}return n}}}},44:function(e,t,n){var r=n(16)(n(99),n(48),null,null);e.exports=r.exports},46:function(e,t,n){var r=n(16)(n(100),n(50),null,null);e.exports=r.exports},47:function(e,t,n){n(52);var r=n(16)(n(101),n(49),null,null);e.exports=r.exports},48:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("game")],1)},staticRenderFns:[]}},49:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.currentTheme.name},[n("div",{staticClass:"game-config"},[n("button",{attrs:{type:"button"},on:{click:e.init}},[e._v("重新开始")])]),e._v(" "),n("table",{staticClass:"game",on:{click:e.handleClick}},e._l(e.cellData,function(t,r){return n("tr",{key:r},e._l(t,function(e,t){return n("cell",{key:t,attrs:{isSelected:e.isSelected,isLine:e.isLine,lineClass:e.lineClass,isBlank:e.isBlank,className:e.className}})}))}))])},staticRenderFns:[]}},50:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",{class:e.classNames},[e.isLine?n("div",{class:e.lineClass}):e._e(),e._v("\n  "+e._s(e.className)+"\n")])},staticRenderFns:[]}},52:function(e,t){},95:function(e,t,n){"use strict";t.a={defaultTheme:"test",cellGroupCount:9,col:10,row:10,lineDelay:500}},96:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(45),i=n(44),a=n.n(i);r.a.config.productionTip=!1,new r.a({el:"#app",render:function(e){return e(a.a)}})},97:function(e,t,n){"use strict";var r=n(93),i=n.n(r),a=[{name:"test",classNames:i()("123456789")}];t.a=a},98:function(e,t,n){"use strict";var r=n(43),i=n.n(r),a=n(42),l=n.n(a),c={};Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),n=t.length>>>0,r=arguments[1],i=r>>0,a=i<0?Math.max(n+i,0):Math.min(i,n),l=arguments[2],c=void 0===l?n:l>>0,s=c<0?Math.max(n+c,0):Math.min(c,n);a<s;)t[a]=e,a++;return t}}),c.dyadicArrayWrap=function(e,t){var n=0,r=0;return e.forEach(function(i,a){0===a?n=i.length+2:a===e.length-1&&(r=i.length+2),i.splice(0,0,l()({},t).valueOf()),i.splice(i.length,0,l()({},t).valueOf())}),e.splice(0,0,Array(n).fill(0).map(function(e){return l()({},t).valueOf()})),e.splice(e.length,0,Array(r).fill(0).map(function(e){return l()({},t).valueOf()})),e};var s=function e(t,n){var r=t.length,i=~~(Math.random()*r);return n.has(i)?e(t,n):(n.add(i),t[i])};c.arrayRandom=function(e,t){if(e.length<=t)return c.arrayShuffle(e),e;var n=new i.a;return Array(t).fill(0).map(function(t){return s(e,n)})},c.arrayShuffle=function(e){for(var t,n,r=e.length;r;t=~~(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);},c.arrayFillByRandomGroup=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t.length,i=~~(~~(e/r)/n)*n,a=e-i*r,s=t.map(function(e,t){return a/n>t?i+n:i}),o=s.reduce(function(e,n,r){return e.concat(Array(n).fill(0).map(function(e){return l()({},t[r]).valueOf()}))},[]);return c.arrayShuffle(o),o},c.arrayToDyadic=function(e,t){var n=[];return e.forEach(function(e,r){var i=~~(r/t),a=r%t;n[i]||(n[i]=[]),n[i][a]=e}),n},t.a=c},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(47),i=n.n(r);t.default={name:"app",components:{game:i.a}}}},[96]);
//# sourceMappingURL=app.f1e102b9024e19e5ae5b.js.map